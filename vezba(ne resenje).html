<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script>
     const renderItem =(item) => {
            $todoitem= $(`<div class= 'todo' ><p>${item.text}</p></div>`)
            $deleteitem= $(`<button><i class='fa-solid fa-x'></i><button>`)
            $completeitem= $(`<button><i class='fa-solid fa-check'></i><button`)
            $todoitem.append($deleteitem)
            $todoitem.append($completeitem)
            $deleteButton.clic((event)  => {
                let div=event.target.closest("div")
                let p= div.getelementsbytagname('p')
                p.style.textdecotation= 'line through'
            })
            $completeButton.click((event) => {
                let div= event.target.closest("div")
                console.log(div)
                $(div)=hide()
            })
            return $todoitem
        }  
            const renderToDoList =(list) =>{
                list.forEach(element =>{
                    $("#todo-list").append(rendertodoitem(element))
                });
            }
            let data;
            $(document).ready(async () => {
            const res = await fetch('http://10.0.4.101:3001/')
            console.log(res)
            data = await res.json()
            renderToDoList(data)
            })
            
            const $additem =()=>{
                let val = ('#new-item-input').val()
                console.log(val)
                const todoItem ={
                    text:val
                }
                 $("#todo-list").prepend(rendertodoitem(todoItem))

            }


</script>
</head>

<body>
    <form action="">
        <input type="text" id="new-item-input">
            <button type="button" onclick="addItem()">Dodaj Novi</button>
        </form>
        <div id="todo-list"></div>
</body>
</html>